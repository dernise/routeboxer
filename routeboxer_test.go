package routeboxer

import (
	"testing"

	"fmt"

	"encoding/json"

	"github.com/paulmach/go.geo"
)

func TestNewRouteBoxer(t *testing.T) {
	pointSet := geo.PointSet{
		{3.0366159982599186, 50.627300916239626}, {3.0368849735327217, 50.626974944025285}, {3.037127964905693, 50.626368932425969}, {3.037157972119104, 50.6263179704547}, {3.0371959421404711, 50.626268936321125}, {3.0354879617308086, 50.625541973859065}, {3.0300549797318013, 50.623236950486884}, {3.0296709209283961, 50.623062942177057}, {3.0296029436936465, 50.623031929135323}, {3.0294099922826376, 50.623241979628801}, {3.0292829226305003, 50.623327977955341}, {3.0291839323540444, 50.623385980725288}, {3.0291229959179589, 50.623422944918275}, {3.0290869537343212, 50.623500980436802}, {3.0289959262658783, 50.623604999855154}, {3.0287389371144968, 50.62372092157603}, {3.0285579718250233, 50.623748917132616}, {3.0284349254864367, 50.623736931011081}, {3.0282269704687224, 50.623662918806069}, {3.0281539640920982, 50.623617991805069}, {3.0280149921374573, 50.623484971001744}, {3.0279709871457783, 50.623380951583378}, {3.0279139902042118, 50.623151957988739}, {3.0279139902042118, 50.623073922470212}, {3.0279539718823401, 50.62291894108057}, {3.0280639424519791, 50.622755996882908}, {3.0281409721421824, 50.622381996363394}, {3.0281519524353371, 50.622329944744699}, {3.0282269704687224, 50.622079996392124}, {3.02826594631847, 50.621815966442234}, {3.0282499368834124, 50.621672971174121}, {3.0281299918489708, 50.6214229390025}, {3.0279579951958624, 50.621249936521068}, {3.0277589249954815, 50.621124962344759}, {3.0274229783163094, 50.620984984561787}, {3.0271879497513225, 50.620927987620234}, {3.0269219919636612, 50.62089798040688}, {3.0267819303615795, 50.620893957093351}, {3.0264619931174934, 50.620923964306712}, {3.0259369507026577, 50.621056985110037}, {3.0251159432868349, 50.621355967596166}, {3.0249909691105472, 50.621463926509009}, {3.0249299488554016, 50.621554953977466}, {3.0249209802190364, 50.621615974232562}, {3.0249869457969965, 50.621793922036886}, {3.0250569346884788, 50.621856953948729}, {3.0251439388434278, 50.621905988082283}, {3.0252409174631794, 50.621935995295622}, {3.0257619365644359, 50.621997937560081}, {3.0258609268408918, 50.621984945610166}, {3.0261329195988935, 50.621888972818851}, {3.0266369234367119, 50.621681939810507}, {3.0271439447596435, 50.621366947889314}, {3.027419960831196, 50.621146922931089}, {3.0276389799610683, 50.620937962085002}, {3.0292559329022879, 50.618970980867722}, {3.0296319450786484, 50.618606954812996}, {3.0300369586399825, 50.618275953456759}, {3.0304319977365708, 50.618045954033732}, {3.0307079299890631, 50.617913939058766}, {3.0313149474168597, 50.617689974606044}, {3.0316599465514287, 50.617595929652445}, {3.0321109767612313, 50.617504986003041}, {3.0328359275667367, 50.617411946877844}, {3.033321994131768, 50.617363918572664}, {3.0342519662888492, 50.61731094494462}, {3.0365569896615341, 50.617202986031764}, {3.0394469860567312, 50.617046998813748}, {3.0400649837777394, 50.6170439813286}, {3.0410529587047961, 50.616979943588362}, {3.0422999344399102, 50.616926969960325}, {3.0450969755288781, 50.6168729905039}, {3.0472179323079445, 50.61691598966717}, {3.0478079344723028, 50.616963934153326}, {3.0496229517854943, 50.617063930258155}, {3.0520089443428731, 50.617134924978004}, {3.0530879467384011, 50.617148922756307}, {3.0543469924140538, 50.61710097827018}, {3.0556349556557336, 50.617013974115245}, {3.0567659258508968, 50.616901991888874}, {3.061226942357905, 50.616359934210777}, {3.0622839841670952, 50.616273935884237}, {3.062872980503073, 50.616209981963024}, {3.0634349871108952, 50.616171928122633}, {3.0642099778783347, 50.616142926737666}, {3.0704209681298948, 50.61614493839442}, {3.0728569168301476, 50.616171928122633}, {3.0750099762983041, 50.616164971143}, {3.0771219644409484, 50.616221968084581}, {3.0780699576899053, 50.616278965026147}, {3.0784289546027708, 50.616290951147668}, {3.0785149529293676, 50.616293968632803}, {3.0794399797636061, 50.616321964189403}, {3.0804679363687626, 50.616314923390732}, {3.0810779712817578, 50.616262955591083}, {3.0814359623662995, 50.616212999448187}, {3.0822059239917792, 50.616044942289584}, {3.0825979456032258, 50.615928936749697}, {3.0831609580394002, 50.615685945376747}, {3.0833639677342433, 50.615579998120666}, {3.0849239237338963, 50.614673998206854}, {3.085214943412069, 50.61448297463356}, {3.0858829810949828, 50.614023981615887}, {3.0872709404414707, 50.612979931756854}, {3.0882319256403434, 50.612318934872746}, {3.094061958392615, 50.608506929129362}, {3.0952069263661315, 50.607804944738739}, {3.0952169846499373, 50.607797987759106}, {3.0952789269144318, 50.607761945575461}, {3.0953619915748618, 50.607715928927064}, {3.097316986671018, 50.606479933485382}, {3.0995239417765958, 50.605129944160581}, {3.0997939228778364, 50.604957947507494}, {3.1004649780459204, 50.604476993903525}, {3.1011199399598581, 50.603900989517577}, {3.1015809446344065, 50.603416934609406}, {3.1019479881743734, 50.60297395102679}, {3.1024069811921606, 50.602322928607457}, {3.1027199614566427, 50.601770980283618}, {3.1030199497712658, 50.601084921509027}, {3.1031289983315276, 50.600766995921724}, {3.1033079519642683, 50.600034920498722}, {3.1033969677760069, 50.599162951111794}, {3.1033669605626528, 50.598518969491131}, {3.1033209439141842, 50.598166929557912}, {3.1032769389225336, 50.597870964556932}, {3.1031499530894564, 50.597339970991008}, {3.1029409922433331, 50.596769917756312}, {3.1025829173397881, 50.59610892087219}, {3.1024499803554306, 50.595910940319307}, {3.1021909795474016, 50.595590919256203}, {3.1017999637643641, 50.595193952322013}, {3.1014049246677757, 50.594840990379438}, {3.1001939911162992, 50.593838933855295}, {3.1000069908564853, 50.593667943030596}, {3.0994329981271846, 50.593062937259681}, {3.0990589976075569, 50.592560945078738}, {3.09825098214165, 50.591391921043396}, {3.0980009499700145, 50.591080952435725}, {3.0974059186636964, 50.590453986078487}, {3.0969409744946574, 50.590005973353989}, {3.0954409491027661, 50.588481975719311}, {3.0912689406171694, 50.584160936996341}, {3.0892839383076023, 50.582144921645515}, {3.0878879323340698, 50.58069393038749}, {3.0847229256957576, 50.577493971213698}, {3.0840389623968179, 50.576765919104226}, {3.0836979865757144, 50.576445981860147}, {3.0832779694077033, 50.575931919738636}, {3.0822969514602221, 50.574925923719988}, {3.0772449269605318, 50.569772981107235}, {3.0764429464648231, 50.569035960361362}, {3.0740279525224992, 50.566587941721082}, {3.0654929957970865, 50.557882916182265}, {3.064973988352591, 50.557348988950253}, {3.0639529887270101, 50.556214917451143}, {3.0632239307890075, 50.555359963327632}, {3.0618669844842259, 50.553594985976801}, {3.0561849761419637, 50.545418942347183}, {3.0557899370453754, 50.544822989031665}, {3.0552479631862184, 50.5440949369222}, {3.0512229732822789, 50.53823699243366}, {3.0504709489295294, 50.537184979766607}, {3.0487339671348934, 50.534657919779413}, {3.0485949951803093, 50.534484917297959}, {3.0480499200169504, 50.533698946237557}, {3.0441789894933322, 50.528153982013471}, {3.0435099459820378, 50.527151925489299}, {3.0374109379568495, 50.51833793520926}, {3.0362199533349781, 50.516731962561593}, {3.0359189591919744, 50.516389980912187}, {3.0347219395997911, 50.515145938843496}, {3.0335169571995664, 50.513954954221845}, {3.0330189883320315, 50.513490932062261}, {3.0324999808875361, 50.513050965964801}, {3.0307419605158827, 50.511669963598258}, {3.0292579445590491, 50.510637983679764}, {3.0268479797585996, 50.509108956903212}, {3.0250259216467441, 50.508142942562692}, {3.0238119706101259, 50.507555957883596}, {3.0234009220785083, 50.507409945130348}, {3.0133449852031902, 50.502989999949918}, {3.0130519538682847, 50.502851950004683}, {3.0126539811056148, 50.502617927268147}, {3.0101929705148223, 50.501553928479552}, {3.0087599165292715, 50.500884968787439}, {3.0076499849110405, 50.500316927209496}, {3.0067309930470856, 50.499812923371792}, {2.996844957349083, 50.494052963331356}, {2.9933729215975404, 50.492048934102066}, {2.991897958096132, 50.49117092974484}, {2.9913469317814645, 50.490822996944189}, {2.9907359748591489, 50.490423934534185}, {2.9898749857651694, 50.489817922934868}, {2.988256943176566, 50.488622998818741}, {2.9874009832244894, 50.48789897002279}, {2.9864579352984606, 50.487060947343693}, {2.9853129673249441, 50.485917991027243}, {2.9841609585527635, 50.484603960067034}, {2.9836339883002552, 50.483946986496441}, {2.9829119711608882, 50.482970997691154}, {2.9819789815186368, 50.481628971174366}, {2.9815269454805104, 50.480866972357035}, {2.9809149827298143, 50.479768943041563}, {2.9803689855570781, 50.478523978963494}, {2.979463991471448, 50.476017957553253}, {2.978517926060249, 50.473487963899963}, {2.9783289979627057, 50.472921933978789}, {2.9757129221632397, 50.465905945748098}, {2.9738869245569219, 50.46062492765487}, {2.9734379898229122, 50.459492951631525}, {2.9722899205452507, 50.456288969144225}, {2.9722749169385736, 50.456245969980955}, {2.9722359410888259, 50.456146979704485}, {2.9716909497444988, 50.45463798567652}, {2.9712379916969951, 50.453267963603146}, {2.971099941751703, 50.452784998342409}, {2.9708759772989026, 50.451780930161462}, {2.9707099317970744, 50.45062992721796}, {2.9706849537256232, 50.450263973325491}, {2.9706339917542834, 50.449010962620363}, {2.9706699501189462, 50.448095994070165}, {2.970824931508588, 50.446611978113651}, {2.9710869498017871, 50.445084962993853}, {2.9712749558899816, 50.444392953068011}, {2.9716399877732158, 50.4432879667729}, {2.9721299938327093, 50.441983994096525}, {2.972519919968363, 50.44114597141742}, {2.9728929984785566, 50.440421942621484}, {2.9733489740112304, 50.439618956297643}, {2.9738319392720882, 50.438809935003519}, {2.9741959653269134, 50.438269972801201}, {2.9753829266353193, 50.436670957133174}, {2.9775149475264868, 50.434168959036462}, {2.980771987461651, 50.430269949138172}, {2.981354948827402, 50.429487917572253}, {2.9821959889918332, 50.428221998736248}, {2.9831389530988588, 50.426534973084919}, {2.9837369180712301, 50.425257990136743}, {2.9842529918496439, 50.423945970833287}, {2.9844739388172741, 50.423287991434336}, {2.9847129906958116, 50.422375956550248}, {2.9849309201783001, 50.421378929167986}, {2.9850719876087339, 50.420422973111279}, {2.985187993148628, 50.419185971841209}, {2.9852119653917271, 50.417760964483008}, {2.9851489334797918, 50.416719932109125}, {2.9849149945622457, 50.414554970338926}, {2.9843449413274357, 50.410207947716131}, {2.9833759933206068, 50.402482934296131}, {2.9828259728343198, 50.398419974371791}, {2.9827479373157928, 50.397561918944128}, {2.982307971218205, 50.394170936197042}, {2.9820699251680765, 50.391969932243228}, {2.981773960167061, 50.389705980196595}, {2.9816049809990375, 50.388838956132531}, {2.9814629915593116, 50.388251971453428}, {2.9811049166557098, 50.387074984610081}, {2.9808029166844108, 50.386244924739003}, {2.980115935900244, 50.384704917669296}, {2.9797029595309539, 50.383882988244309}, {2.9793559487395669, 50.383255938068039}, {2.9786079477003398, 50.382051961496458}, {2.9780259921630261, 50.381219973787665}, {2.977450993605288, 50.380473984405384}, {2.9762159201727059, 50.378940934315317}, {2.9755849305017819, 50.378205925226204}, {2.9736639659324737, 50.37580492906271}, {2.9723519466287769, 50.374095942825086}, {2.9673269956762169, 50.367818986997001}, {2.9656269780745674, 50.365632986649871}, {2.9648709304083525, 50.36470293067395}, {2.9637319974051195, 50.363407926633954}, {2.9627609539224977, 50.362376952543848}, {2.961707935426773, 50.361323934048414}, {2.9602069880255328, 50.359939998015761}, {2.959175930116146, 50.359039949253187}, {2.9584609537754147, 50.358446929603808}, {2.9577299679996827, 50.357853993773453}, {2.9562059703646639, 50.356689998880036}, {2.9547199427510691, 50.355626922100768}, {2.95261994072996, 50.354233933612718}, {2.9505889217719812, 50.353001961484544}, {2.9403699568799766, 50.34706195816397}, {2.9309629469483411, 50.341573990881443}, {2.9304839211820308, 50.341277942061438}, {2.9295929248746404, 50.340698920190327}, {2.9282529938333255, 50.339759979397058}, {2.9268729972948506, 50.338644934818142}, {2.9264019343365248, 50.338246962055557}, {2.9254169768945815, 50.33736694604157}, {2.9250389530614598, 50.33702798187732}, {2.9249909247562869, 50.336984982714043}, {2.9247959616884884, 50.336863948032246}, {2.9247079517051588, 50.336808962747448}, {2.9246509547635924, 50.336772920563824}, {2.9241559195621392, 50.336399925872684}, {2.9230889871071781, 50.335540948435657}, {2.9228289804707401, 50.335357971489422}, {2.922502924437282, 50.335160996764898}, {2.9220309394695789, 50.334927979856722}, {2.9217079847402943, 50.334789929911501}, {2.9211879714674183, 50.334598990157254}, {2.9210919986761041, 50.334567977115505}, {2.9210549506640859, 50.334556996822364}, {2.9209089379108093, 50.334511986002319}, {2.9183279822856321, 50.333802960813024}, {2.9174929770914844, 50.333603974431746}, {2.91703892939654, 50.333556951954954}, {2.9140659521599446, 50.33338294364512}, {2.9137099727321925, 50.333348996937261}, {2.9132489680576157, 50.33326392062007}, {2.912981920622542, 50.333246989175677}, {2.9014049197783152, 50.332352975383394}, {2.9003439384746343, 50.332311987876892}, {2.8996059957192415, 50.332331936806433}, {2.8990199330493454, 50.332371918484569}, {2.8983709222866025, 50.332449954003089}, {2.8977189778577781, 50.332549950107932}, {2.8965419910141748, 50.332805933430791}, {2.8953039839154258, 50.333118997514234}, {2.8941339540514548, 50.333355953916907}, {2.8930209211290503, 50.333484951406696}, {2.8920659709004894, 50.333537925034747}, {2.8917449440089626, 50.333537925034747}, {2.8914549301591421, 50.333531973883517}, {2.8913709434893065, 50.333530968055122}, {2.8912079992916517, 50.333544965833418}, {2.8909379343714079, 50.333567932248101}, {2.890924942421492, 50.333569943904884}, {2.8884319967796444, 50.333513952791698}, {2.8882519534994913, 50.333522921428091}, {2.8881259734947662, 50.333530968055122}, {2.8879009193945819, 50.333511941134923}, {2.8874949838238706, 50.333481933921568}, {2.8872879508154767, 50.333449998870485}, {2.8870719491707177, 50.333409933373325}, {2.8866599786297229, 50.333295939490199}, {2.885633949862239, 50.33291095867753}, {2.8815569921586359, 50.331259975209832}, {2.8811479552837795, 50.331123936921358}, {2.8808419319989298, 50.331062916666262}, {2.8804869583995298, 50.331065934151418}, {2.8801809351146517, 50.33113198354841}, {2.8796479298918598, 50.331349996849895}, {2.8788609530029134, 50.331707987934344}, {2.8783839388933075, 50.331870932131991}, {2.877672985866127, 50.332046952098608}, {2.8761339846244596, 50.332393962889903}, {2.8758379358043555, 50.332461940124638}, {2.864462938826648, 50.335078937932856}, {2.8613659932421172, 50.335772959515445}, {2.8605659405842232, 50.335974963381886}, {2.8601819655998213, 50.336124999448643}, {2.8598909459216202, 50.336287943646305}, {2.859345954577293, 50.336688933894024}, {2.8589279490660431, 50.336965955793858}, {2.8579939535954111, 50.33748798072336}, {2.8573409195191459, 50.337808923795812}, {2.8561679559890933, 50.338293984532356}, {2.8553299333098039, 50.338583998382084}, {2.85522893137653, 50.338596990332}, {2.8551999299915565, 50.338594978675246}, {2.8551279294432845, 50.338585926219835}, {2.8546469758391879, 50.338443936780102}, {2.8538959573148475, 50.338221983984106}, {2.8535109765020934, 50.338140930980437}, {2.853295980685715, 50.338117964565754}, {2.8530899535057017, 50.338140930980437}, {2.8528399213340094, 50.338209997862577}, {2.8526239196892504, 50.338302953168757}, {2.8526069882448439, 50.338309993967407}, {2.8519809438967911, 50.338761946186416}, {2.8515849827909108, 50.339080961421132}, {2.8514269839160704, 50.339177940040834}, {2.8513889300756716, 50.339192943647497}, {2.8513179353557803, 50.339222950860858}, {2.8513339447908379, 50.339247928932295}, {2.851320952840922, 50.339308949187391}, {2.8512379719995238, 50.33934096805752}, {2.851196984493015, 50.33934096805752}, {2.8511889378659703, 50.339388996362679}, {2.8511629539661385, 50.339444987475858}, {2.8501189879258391, 50.340472944080823}, {2.8490439250248301, 50.341451950371265}, {2.8484109236971449, 50.341964922845371}, {2.8482469736710527, 50.342131974175565}, {2.8481849475875833, 50.342217972502119}, {2.8481669264957645, 50.342354932799921}, {2.8482649947629284, 50.342871928587556}, {2.848779978893873, 50.345105957239866}, {2.8488049569653242, 50.345400916412466}, {2.8487979999857203, 50.345652960240841}, {2.8486909630821913, 50.346583938226104}, {2.8486999317185848, 50.346749983727932}, {2.8487289331035583, 50.346825923770673}, {2.8487319505887285, 50.346835982054458}, {2.8487589403169409, 50.346914939582348}, {2.8488099861072556, 50.34696095623076}, {2.8488419211583391, 50.346998926252127}, {2.8487309447603195, 50.347043937072158}, {2.8482469736710527, 50.347228925675147}, {2.8481819301024416, 50.347276953980327}, {2.8474519501550333, 50.348059991374612}, {2.8473839729203121, 50.348152946680777}, {2.8473169176949398, 50.348425945267067}, {2.8472799535019533, 50.353533960878856}, {2.8472569870872633, 50.354656968265772}, {2.8472119762672037, 50.354828964918831}, {2.8471219546271413, 50.354993920773254}, {2.8466969921362306, 50.355509994551532}, {2.8454649361887618, 50.356705924496062}, {2.8453459969827577, 50.356792928650954}, {2.8452639381506799, 50.356854954734452}, {2.8446819826133378, 50.356660997495055}, {2.8434289719079118, 50.356057919561863}, {2.8430269758317195, 50.355888940393925},
	}

	routeBoxer := NewRouteBoxer(1000, pointSet)
	boxes := routeBoxer.Boxes()
	json, _ := json.Marshal(boxes.ToGeoJson())
	fmt.Println(string(json))
	fmt.Println("Sample Result : http://bl.ocks.org/anonymous/raw/04813c372d49b26fe2dbf78252890115")

}
